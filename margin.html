<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Margin Level Guide & Calculator</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0A0D14;
  --card:#111827;

  --text:#EAF1FF;
  --muted:#9AAAC7;

  --good:#2dd4bf;
  --warn:#fbbf24;
  --bad:#fb7185;

  --line:rgba(255,255,255,.12);
  --shadow:0 16px 40px rgba(0,0,0,.6);
  --radius:18px;
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}

.wrap{max-width:1100px;margin:auto;padding:26px 18px 64px}

.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:14px;
  margin-bottom:18px;
}

h1{margin:0;font-size:26px}
.subtitle{margin-top:6px;color:var(--muted);max-width:85ch}

.pill{
  font-size:12px;
  padding:8px 12px;
  border-radius:999px;
  border:1px solid var(--line);
  background:#0F172A;
}

.grid{
  display:grid;
  grid-template-columns:1.05fr .95fr;
  gap:16px;
}
@media(max-width:900px){.grid{grid-template-columns:1fr}}

.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:18px;
}

.sectionTitle{
  font-size:13px;
  letter-spacing:.18em;
  text-transform:uppercase;
  color:rgba(234,241,255,.7);
  margin-bottom:10px;
}

h2{margin:0 0 12px;font-size:20px}

.zone{
  border-radius:16px;
  padding:14px;
  margin-bottom:12px;
  border:1px solid var(--line);
  background:#0B1220;
}

.zone h3{
  margin:0 0 6px;
  display:flex;
  align-items:center;
  gap:10px;
  font-size:14px;
}

.dot{width:12px;height:12px;border-radius:50%}
.green{background:var(--good)}
.yellow{background:var(--warn)}
.red{background:var(--bad)}

.zone p{margin:0;color:var(--muted);font-size:14px}

.explain{
  margin-top:10px;
  color:var(--muted);
  font-size:13.5px;
  line-height:1.55;
}

label{
  display:block;
  font-size:12px;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:rgba(154,170,199,.9);
  margin:14px 0 7px;
}

input{
  width:100%;
  padding:11px 12px;
  border-radius:14px;
  border:1px solid var(--line);
  background:#020617;
  color:var(--text);
  font-size:15px;
}

button{
  width:100%;
  margin-top:14px;
  padding:12px 14px;
  border-radius:16px;
  border:1px solid var(--line);
  background:#0F172A;
  color:var(--text);
  font-weight:800;
  cursor:pointer;
}
button:hover{background:#111C34}

.result{
  margin-top:12px;
  padding:14px;
  border-radius:16px;
  border:1px solid var(--line);
  background:#020617;
}

.big{font-size:34px;font-weight:900}

.status{
  display:flex;
  align-items:center;
  gap:10px;
  margin-top:8px;
  font-weight:900;
}

.hr{
  height:1px;
  margin:16px 0;
  background:var(--line);
}

footer{
  margin-top:18px;
  color:var(--muted);
  font-size:12.5px;
}
</style>
</head>

<body>
<div class="wrap">

<div class="topbar">
  <div>
    <h1>Margin Level Guide</h1>
    <p class="subtitle">
      As the algorithm opens trades, margin will fall. This is normal. What matters is which zone your margin is in and what (if anything) you should do.
    </p>
  </div>
</div>

<div class="grid">

<!-- LEFT -->
<div class="card">
  <div class="sectionTitle">Understanding Zones</div>

  <div class="zone">
    <h3><span class="dot green"></span> Green Zone (500% or higher)</h3>
    <p>Normal operation. margin is being used as designed. Please do not intervene. Large drops here are expected and temporary.</p>
  </div>

  <div class="zone">
    <h3><span class="dot yellow"></span> Yellow Zone (100% to 499%)</h3>
    <p>Decision zone. Here is when you can choose to intervene, but you do not have to. You may choose to stop new trades, add funds, close some trades, or simply do nothing and allow stop loss. Again, none of this is necessary and if you choose to do nothing, the algorithm will continue to follow its predefined risk rules.</p>
  </div>

  <div class="zone">
    <h3><span class="dot red"></span> Red Zone (less than 100%)</h3>
    <p>Emergency zone. Here Broker force-closures and hitting stop loss become more likely. Stop new trades immediately. Then either add funds, reduce exposure, or allow stop loss / broker actions.</p>
  </div>

  <p class="explain">
    Doing nothing is a valid choice. Inaction means accepting the algorithm’s predefined worst-case outcome.
  </p>

  <div class="hr"></div>

  <div class="sectionTitle">Worst-Case Simulator</div>
  <h2>Leverage drawdown preview</h2>
  <p>If price moved against your open exposure by X%, this is approximately how much equity you would have left.</p>

  <label>Account Leverage (×)</label>
  <input id="leverage" type="number" value="10">

  <label>Adverse Move (%)</label>
  <input id="adverseMove" type="number" value="5">

  <button onclick="simulate()">Simulate Drawdown</button>

  <div id="simResult" class="result" style="display:none">
    <div class="big" id="simEquity">$—</div>
    <div class="status">
      <span class="dot" id="simDot"></span>
      <span id="simLabel"></span>
    </div>
    <p class="explain" id="simExplain"></p>
  </div>
</div>

<!-- RIGHT -->
<div class="card">
  <div class="sectionTitle">Calculator</div>
  <h2>Margin calculation</h2>

  <label>Account Equity (USD)</label>
  <input id="equity" type="text" placeholder="12,500">

  <label>Used Margin (USD)</label>
  <input id="usedMargin" type="text" placeholder="2,500">

  <!-- LIVE RESULT DIRECTLY BELOW INPUTS -->
  <div id="result" class="result" style="display:none">
    <div class="big" id="marginOutput">—</div>
    <div class="status">
      <span class="dot" id="statusDot"></span>
      <span id="statusLabel"></span>
    </div>
    <p class="explain" id="statusExplain"></p>
  </div>

  <div class="hr"></div>

  <h2>If you choose to add funds</h2> 
  <p class="explain"> Adding funds increases your margin without changing any trades. This is optional and only one of several valid actions. </p>

  <label>Target Margin Level (%)</label>
  <input id="targetMargin" type="number" value="500">

  <button onclick="calculateTopUp()">Calculate Deposit</button>

  <div id="topupResult" class="result" style="display:none">
    <div class="big" id="topupAmount">$—</div>
    <p class="explain" id="topupExplain"></p>
  </div>

  <footer>
    Educational tool only. Broker margin and liquidation rules vary.
  </footer>
</div>

</div>
</div>

<script>
const equity=document.getElementById("equity");
const usedMargin=document.getElementById("usedMargin");

function num(v){return Number(String(v).replace(/,/g,""))}

function calculate(){
  const e=num(equity.value);
  const u=num(usedMargin.value);
  if(!(e>0&&u>0)){result.style.display="none";return;}

  const m=(e/u)*100;
  result.style.display="block";
  marginOutput.textContent=Math.round(m)+"%";

  statusDot.className="dot "+(m>=500?"green":m>=100?"yellow":"red");
  statusLabel.textContent=m>=500?"Green zone":m>=100?"Yellow zone":"Red zone";
  statusExplain.textContent=
    m>=500?"Normal operation.":
    m>=100?"Decision zone.":
    "Emergency zone.";
}

equity.addEventListener("input",calculate);
usedMargin.addEventListener("input",calculate);

function calculateTopUp(){
  const e=num(equity.value);
  const u=num(usedMargin.value);
  const t=+targetMargin.value;
  if(!(e&&u&&t))return;
  const need=Math.max(0,u*(t/100)-e);
  topupResult.style.display="block";
  topupAmount.textContent="$"+Math.round(need);
  topupExplain.textContent=need?
    `Deposit to reach ~${t}%.`:
    "Current equity already supports this margin.";
}

function simulate(){
  const e=num(equity.value);
  const u=num(usedMargin.value);
  const l=+leverage.value;
  const a=+adverseMove.value;
  if(!(e&&u))return;
  const loss=e*l*(a/100);
  const ne=Math.max(0,e-loss);
  const m=(ne/u)*100;

  simResult.style.display="block";
  simEquity.textContent="$"+Math.round(ne);
  simDot.className="dot "+(m>=500?"green":m>=100?"yellow":"red");
  simLabel.textContent=m>=500?"Green":m>=100?"Yellow":"Red";
  simExplain.textContent=`Projected margin: ${Math.round(m)}%.`;
}
</script>

</body>
</html>
